name: GitHub Actions Test
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - run: echo "repository - ${{ github.repository }}."
      - run: echo "branch - ${{ github.ref }}"
      - name: Check out repository code
        uses: actions/checkout@v3
      - run: echo "🍏 This job's status is ${{ job.status }}."
      - run: rvm use $(cat .ruby-version) --install
      - run: gem install bundler -v 1.14.6
      - run: sed -i "s|5432|5436|" "config/database.yml"
      - run: export RAILS_ENV=test
      - run: bundle install
      - run: bundle exec rake db:schema:load
      - run: yarn
      - run: ((yarn add cypress --dev) && (bash -c "rails server -e test -p 5017 & sh -c 'rm app/assets/webpack/* || true && cd client && bundle exec rake react_on_rails:locale && webpack-dev-server --config webpack.config.js --inline --host 0.0.0.0 --public 10.254.0.74/24:8080' 2>&1 &" && sleep 120))
